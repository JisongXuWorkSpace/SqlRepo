-- ®w¦s

SELECT OH.COMPANYCODE,
        M.BRANDCODE,
       M.ARTICLENO,
       (SELECT PR.SALE_PRICE
          FROM RPM_PRICE PR
         WHERE PR.ITEMNO = OH.ITEMNO
           AND PR.COMPANY_CODE = OH.COMPANYCODE) AS PRICE,
       OH.*
  FROM IVCONHAND OH, MSTARTICLE M
 WHERE 1 = 1
   AND M.ITEMNO = OH.ITEMNO
   AND OH.WAREHOUSECODE IN( '2','1','6') --201 ºû­×­Ü
   AND OH.GODOWNCODE = '01'
      --AND OH.COMPANYCODE = '20'
   AND OH.ONHAND > 0
   AND OH.CITYCODE LIKE '%LK%'
AND OH.ITEMNO IN ('3K270','')
 ORDER BY OH.ONHAND DESC
 
-- «O¯d
SELECT * FROM IVCHOLDINGQTY HO WHERE HO.ITEMNO= '7I863' AND HO.STOCKCHARACTERCODE = 'A'
-- °t³f
SELECT * FROM IVCASSIGNQTY AQ WHERE AQ.ITEMNO = '7I863'
SELECT * FROM ivc_postallocation_qty ipq WHERE ipq.item_no = '7I863'

SELECT * FROM SYS_MONTHEND_TIME_WH TW WHERE TW.COMPANYCODE = '20' AND TW.CITYCODE = 'LKA'
SELECT *
  FROM SYS_MONTHEND_TIME_WH TW
 WHERE (to_char(TW.monthendtimebeg, 'YYYYMM') =
       to_char(sysdate, 'YYYYMM') or
       to_char(TW.monthendtimeend, 'YYYYMM') =
       to_char(sysdate, 'YYYYMM'))
SELECT * FROM MONTHSET

SELECT * FROM RPM_PRICE PR WHERE PR.ITEMNO = '8F024'


-- ¼Æ¶qµn¤J

SELECT *
  FROM RMASRMDETAIL SRD
 WHERE 1 = 1
  --AND SRD.COMPANYCODE = '06'
   AND EXISTS (SELECT 1
          FROM RMASRMHEAD SR
         WHERE 1 = 1
           AND SR.SRMNO = SRD.SRMNO
           AND SR.COMPANYCODE = SRD.COMPANYCODE
           AND SR.RETURN_TYPE <> 'S')
           
  AND EXISTS(
  SELECT  OH.* FROM IVCONHAND OH , MSTARTICLE M WHERE 1=1
AND M.ITEMNO = OH.ITEMNO
AND OH.WAREHOUSECODE = '2' --201 ºû­×­Ü
AND OH.GODOWNCODE = '01'
--AND OH.COMPANYCODE = 'SH'
AND OH.ONHAND > 0
--AND OH.CITYCODE LIKE '%LK%'
--AND OH.ITEMNO IN ('','')
AND SRD.ITEMNO = OH.ITEMNO
AND SRD.COMPANYCODE = OH.COMPANYCODE
  )
  
-- °e­×¥X®w(R«~)

SELECT * FROM RMARMDETAIL RMD WHERE 1=1 
AND EXISTS(
SELECT rm.return_type , rm.* FROM RMARMHEAD RM WHERE 1=1
AND RM.CONFIRMMARK <> 'Y' 
AND RM.RMSTATUSCODE <> '4'
and rm.return_type <> 'S'
AND RMD.COMPANYCODE = RM.COMPANYCODE
AND RMD.RMNO = RM.RMNO
) AND EXISTS(
  SELECT  OH.* FROM IVCONHAND OH , MSTARTICLE M WHERE 1=1
AND M.ITEMNO = OH.ITEMNO
AND OH.WAREHOUSECODE = '2' --201 ºû­×­Ü
AND OH.GODOWNCODE = '01'
--AND OH.COMPANYCODE = 'SH'
AND OH.ONHAND > 0
--AND OH.CITYCODE LIKE '%LK%'
--AND OH.ITEMNO IN ('','')
AND rmd.Itemno = OH.ITEMNO
AND RMD.COMPANYCODE = OH.COMPANYCODE
  )
  
  
  



SELECT M.BRANDCODE,
       M.ARTICLENO,
       (SELECT PR.SALE_PRICE
          FROM RPM_PRICE PR
         WHERE PR.ITEMNO = OH.ITEMNO
           AND PR.COMPANY_CODE = OH.COMPANYCODE) AS PRICE,
       OH.*
  FROM IVCONHAND OH, MSTARTICLE M
 WHERE 1 = 1
   AND M.ITEMNO = OH.ITEMNO
   AND OH.WAREHOUSECODE = '2' --201 ºû­×­Ü
   AND OH.GODOWNCODE = '01'
   AND OH.COMPANYCODE = '20'
   AND OH.ONHAND > 0
      --AND OH.CITYCODE LIKE '%LK%'
      --AND OH.ITEMNO IN ('','')
   AND EXISTS (SELECT M1.ITEMNO,
               M1.ARTICLENO,
               M2.ITEMNO,
               M2.ARTICLENO,
               M1.PRODUCTIONNO,
               M2.PRODUCTIONNO
          FROM MSTARTICLE M1, MSTARTICLE M2
         WHERE 1 = 1
           AND M1.ITEMNO <> M2.ITEMNO
           AND M1.PRODUCTIONNO = M2.PRODUCTIONNO
           AND M1.BRANDCODE = M2.BRANDCODE
           AND M1.ITEMNO = M.ITEMNO
           )
 ORDER BY OH.ONHAND DESC

  
