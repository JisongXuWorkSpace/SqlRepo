--4. 檢核重複工時
SELECT *
FROM FIX_SERVICE FS WHERE (FS.EMP_NO, FS.WORK_START_TIME, FS.WORK_LINE_NO) IN(
SELECT FS.EMP_NO, FS.WORK_START_TIME, FS.WORK_LINE_NO
  FROM FIX_SERVICE FS
WHERE 1 = 1
   AND FS.WORK_START_TIME IS NOT NULL
   AND FS.CREATE_DATE >= TO_DATE('2020-07-29','YYYY-MM-DD')
GROUP BY FS.EMP_NO, FS.WORK_START_TIME, FS.WORK_LINE_NO
HAVING COUNT(1) > 1)
AND FS.CREATE_DATE >= TO_DATE('2020-10-05','YYYY-MM-DD')
ORDER BY FS.EMP_NO, FS.WORK_START_TIME, FS.WORK_LINE_NO;


SELECT * FROM FIX_SERVICE FS WHERE FS.EMP_NO ='C02488' AND FS.WORK_START_DATE = TO_DATE('200925 14:41:44','YYMMDD HH24:MI:SS') AND FS.WORK_LINE_NO ='1'

SELECT * FROM FIX_APP_WORK_RECORD WR WHERE WR.CREATE_EMP_NO ='C02488' AND WR.MT_SLIP_NO IN ('','S200909042');


SELECT *
  FROM FIX_APP_EMP_LOCATION AL
 WHERE AL.EMP_NO = 'C02488'
   AND AL.COMPANY_CODE = 'XA'
   AND AL.APP_TIME >= TO_DATE('200925', 'YYMMDD')
   AND AL.OPERATION_TYPE IN
       ('01', '02', '03', '04', '05', '06', '07', '08')
   --AND AL.MT_SLIP_NO ='S200908039'
 ORDER BY AL.APP_TIME;
 人員    : C02488
 工作開始: 2020/9/25 上午 07:45:45
 到達時間: 2020/9/25 上午 08:28:02
 完成時間: 2020/9/25 下午 06:02:12
 
 SELECT * FROM FIX_APP_WORK_RECORD WR WHERE WR.CREATE_EMP_NO ='C02488' AND WR.MT_SLIP_NO IN ('','S200908039');
 SELECT * FROM FIX_


UPDATE TBS_MAJ.FIX_APP_EMP_LOCATION  SET APP_TIME=to_date('27-08-2020 18:43:38', 'dd-mm-yyyy hh24:mi:ss') WHERE SEQ_NO='7435008';
UPDATE TBS_MAJ.FIX_APP_EMP_LOCATION  SET APP_TIME=to_date('27-08-2020 18:44:44', 'dd-mm-yyyy hh24:mi:ss') WHERE SEQ_NO='7435037';


SELECT * FROM FIX_SERVICE WHERE SLIP_NO='S200908039' AND EMP_NO='C02488' AND  COMPANY_CODE='XA' AND SEQ = '3';
SELECT * FROM FIX_APP_WORK_RECORD WR WHERE WR.MT_COMPANY_CODE ='XA' AND WR.MT_SLIP_NO='S200908039' AND WR.CREATE_EMP_NO='C02488' AND WR.SEQ_NO ='283852';
改完去修改工時功能按一下會重新計算總工時
UPDATE TBS_MAJ.FIX_SERVICE  SET WORK_END_DATE=to_date('2020/9/25 18:02:12', 'YYYY/MM/DD hh24:mi:ss')  WHERE SLIP_NO='S200908039' AND EMP_NO='C02488' AND  COMPANY_CODE='XA' AND SEQ = '3';
UPDATE TBS_MAJ.FIX_APP_WORK_RECORD WR SET WR.COMPLETED_TIME=to_date('2020/9/25 18:02:12', 'YYYY/MM/DD hh24:mi:ss') WHERE WR.MT_COMPANY_CODE ='XA' AND WR.MT_SLIP_NO='S200908039' AND WR.CREATE_EMP_NO='C02488' AND WR.SEQ_NO ='283852';

SELECT * FROM FIX_SERVICE WHERE SLIP_NO='S200909042' AND EMP_NO='C02488' AND  COMPANY_CODE='XA' AND SEQ = '4';
DELETE TBS_MAJ.FIX_SERVICE  WHERE SLIP_NO='S200909042' AND EMP_NO='C02488' AND  COMPANY_CODE='XA' AND SEQ = '4';




应该是下午六点三十
